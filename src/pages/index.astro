---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/shared/Navbar.jsx';
import HeroCarousel from '../components/HeroCarousel.jsx';

import { 
  ArrowRight, 
  Leaf, 
  Users, 
  Microscope, 
  Globe2, 
  ChevronDown, 
  HeartHandshake,
  MapPin, 
  X, 
  Map as MapIcon
} from 'lucide-react';

// ✅ OPTIMIZACIÓN 1: Datos estructurados fuera del template
const estadisticas = [
  { numero: "+50k", texto: "Hectáreas Conservadas", icon: Leaf },
  { numero: "12", texto: "Comunidades Aliadas", icon: Users },
  { numero: "25", texto: "Proyectos Científicos", icon: Microscope },
  { numero: "100%", texto: "Transparencia", icon: Globe2 },
];

const pilares = [
  {
    id: 'bosque-vivo',
    imagen: '/imags/material_navbar/bq.jpg',
    icono: Leaf,
    titulo: 'Bosque Vivo',
    descripcion: 'Conservación estricta y gestión de áreas protegidas.',
    color: 'earth',
    url: '/quienes-somos'
  },
  {
    id: 'ciencia',
    imagen: '/imags/material_navbar/ciencia.jpg',
    icono: Microscope,
    titulo: 'Ciencia Amazónica',
    descripcion: 'Investigación, monitoreo y generación de datos.',
    color: 'blue',
    url: '/que-hacemos'
  },
  {
    id: 'bienestar',
    imagen: '/imags/material_navbar/bienestar.jpg',
    icono: HeartHandshake,
    titulo: 'Bienestar Social',
    descripcion: 'Salud, educación y fortalecimiento comunitario.',
    color: 'red',
    url: '/programas'
  }
];

const aliados = [
  { nombre: 'INPA', url: 'https://www.gov.br/inpa/pt-br', logo: '/imags/material_aliados/INPA.png' },
  { nombre: 'IF Acre', url: 'https://www.ifac.edu.br/', logo: '/imags/material_aliados/acre.png' },
  { nombre: 'UFAC', url: 'https://www.ufac.br/', logo: '/imags/material_aliados/UFAC.png' },
  { nombre: 'UFAM', url: 'https://www.ufam.edu.br/', logo: '/imags/material_aliados/UFAM.png' },
  { nombre: 'UFPR', url: 'https://ufpr.br/', logo: '/imags/material_aliados/UFPR.svg' },
];
---

<Layout 
  title="Inicio" 
  description="Fundación Flora Amazónica - Conservación, ciencia y comunidad en el corazón del bosque amazónico de Pando, Bolivia"
>
  {/* ✅ OPTIMIZACIÓN 2: Navbar con transition:persist para evitar re-renders */}
  <Navbar client:load transition:persist />

  <main>
    
    
    <!-- ✅ SOLUCIÓN COMPLETA: Hero sin flash verde al cargar video -->

        <section 
        class="relative h-screen flex items-center justify-center bg-amazon-900 text-white overflow-hidden"
        aria-label="Sección principal"
        >
        {/* ✅ CAPA 1: Imagen de fondo (se ve inmediatamente) */}
        <div 
            class="absolute inset-0 w-full h-full z-0 bg-cover bg-center"
            style="background-image: url('/videos/poster.jpg');"
            aria-hidden="true"
        ></div>

        {/* ✅ CAPA 2: Video (se hace visible cuando está listo) */}
        <video 
            id="heroVideo"
            autoplay 
            loop 
            muted 
            playsinline 
            poster="/videos/poster.jpg" 
            class="absolute inset-0 w-full h-full object-cover z-0 opacity-0 transition-opacity duration-1000"
            preload="auto"
            aria-hidden="true"
        >
            <source src="/videos/video_forama_home1.mp4" type="video/mp4" />
            Tu navegador no soporta video.
        </video>

        {/* ✅ CAPA 3: Overlay oscuro */}
        <div class="absolute inset-0 bg-black/50 z-10" aria-hidden="true"></div>
        
        {/* ✅ Contenido del hero */}
        <div class="relative z-20 container mx-auto px-4 text-center mt-8 animate-fade-in-up">
            
            <span class="inline-flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 text-white text-sm font-semibold px-4 py-1.5 rounded-full mb-8 tracking-wide uppercase shadow-sm">
            <span class="w-2 h-2 rounded-full bg-green-400 animate-pulse" aria-hidden="true"></span>
            Pando, Bolivia
            </span>

            <HeroCarousel client:load />
            
            <p class="mt-8 text-xl md:text-2xl text-gray-100 font-light drop-shadow-md max-w-3xl mx-auto leading-relaxed text-balance">
            Uniendo ciencia, comunidad y conservación en el corazón del bosque.
            </p>
        </div>

        <div class="absolute bottom-10 z-20 animate-bounce">
            <ChevronDown size={40} className="text-white/70" aria-hidden="true" />
        </div>
        </section>

        {/* ✅ Script para fade in suave del video */}
        <script>
        document.addEventListener('astro:page-load', () => {
            const video = document.getElementById('heroVideo') as HTMLVideoElement;
            
            if (video) {
            // Cuando el video está listo para reproducir
            video.addEventListener('canplay', () => {
                // Fade in suave del video
                video.classList.remove('opacity-0');
                video.classList.add('opacity-100');
            }, { once: true });

            // Backup: si el video no carga en 2 segundos, mostrar de todos modos
            setTimeout(() => {
                if (video.classList.contains('opacity-0')) {
                video.classList.remove('opacity-0');
                video.classList.add('opacity-100');
                }
            }, 1000);
            }
        });
        </script>

        <style>
        /* Asegurar transición suave */
        #heroVideo {
            will-change: opacity;
        }
        </style>
    

    {/* ✅ OPTIMIZACIÓN 6: Sección de aliados con semántica mejorada */}
    <section 
      class="py-16 border-b border-gray-200 overflow-hidden relative z-20 bg-white/30"
      aria-labelledby="aliados-heading"
    >
      {/* Background blobs */}
      <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden" aria-hidden="true">
        <div class="absolute -top-40 -left-40 w-96 h-96 bg-amazon-300 rounded-full mix-blend-multiply opacity-40 animate-blob"></div>
        <div class="absolute -bottom-40 -right-40 w-[30rem] h-[30rem] bg-earth-300 rounded-full mix-blend-multiply opacity-40 animate-blob delay-2000"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-cyan-200 rounded-full mix-blend-multiply opacity-40 animate-blob delay-5000"></div>
        <div class="absolute inset-0 bg-white/60 backdrop-blur-[1px]"></div>
      </div>

      <div class="container mx-auto px-4 mb-16 text-center animate-fade-in-up relative z-10">
        <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/80 backdrop-blur-md border border-gray-200 shadow-sm mb-6">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-amazon-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-amazon-500"></span>
          </span>
          <span class="text-gray-600 font-bold tracking-[0.2em] uppercase text-[10px] md:text-xs">Red de Colaboración</span>
        </div>

        <h2 id="aliados-heading" class="text-4xl md:text-5xl font-extrabold text-gray-900 tracking-tight leading-tight">
          Caminamos <br class="md:hidden" />
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-amazon-600 via-amazon-500 to-earth-500">
            Acompañados
          </span>
        </h2>

        <p class="mt-4 text-lg text-gray-500 max-w-2xl mx-auto font-light drop-shadow-sm">
          La conservación es un esfuerzo colectivo.
        </p>
      </div>

      {/* ✅ OPTIMIZACIÓN 7: Marquee mejorado con accesibilidad */}
      <div class="relative w-full overflow-hidden z-10 py-10 bg-white">
        <div class="pointer-events-none absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-white to-transparent z-20" aria-hidden="true" />
        <div class="pointer-events-none absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-white to-transparent z-20" aria-hidden="true" />

        <div class="marquee group" role="region" aria-label="Instituciones aliadas">
          <div class="marquee__track">
            <div class="marquee__content">
              {aliados.map((aliado) => (
                <a 
                  href={aliado.url} 
                  target="_blank" 
                  rel="noopener noreferrer" 
                  class="shrink-0"
                  aria-label={`Visitar sitio web de ${aliado.nombre}`}
                >
                  <img 
                    src={aliado.logo} 
                    alt={aliado.nombre}
                    class="h-40 md:h-56 w-auto grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-500 cursor-pointer object-contain"
                    loading="lazy"
                    width="200"
                    height="200"
                  />
                </a>
              ))}
            </div>

            {/* ✅ OPTIMIZACIÓN 8: Duplicado para marquee infinito */}
            <div class="marquee__content" aria-hidden="true">
              {aliados.map((aliado) => (
                <a href={aliado.url} target="_blank" rel="noopener noreferrer" class="shrink-0" tabindex="-1">
                  <img 
                    src={aliado.logo} 
                    alt=""
                    class="h-40 md:h-56 w-auto grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-500 cursor-pointer object-contain"
                    loading="lazy"
                  />
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    {/* ✅ OPTIMIZACIÓN 9: Sección "Quiénes Somos" optimizada */}
    <section 
      class="py-32 bg-stone-50 scroll-trigger opacity-0 translate-y-20 transition-all duration-1000"
      aria-labelledby="about-heading"
    >
      <div class="container mx-auto px-4 max-w-7xl">
        <div class="grid md:grid-cols-2 gap-16 items-center">
          <div class="space-y-8">
            <span class="inline-block py-1 px-3 rounded-full bg-earth-100 text-earth-700 text-xs font-bold uppercase tracking-widest">
              Nuestra Esencia
            </span>
            
            <h2 id="about-heading" class="text-4xl md:text-5xl font-extrabold text-amazon-900 leading-tight">
              Conservar no es prohibir, es <span class="text-earth-600">saber convivir</span>.
            </h2>
            
            <p class="text-lg text-gray-600 leading-relaxed text-pretty">
              FORAMA Amazónica es una entidad privada sin fines de lucro, orientada a promover el desarrollo sostenible mediante planificación, salud, educación e investigación científica.
            </p>

            <div class="flex flex-wrap gap-4 pt-4">
              <a 
                href="/quienes-somos" 
                class="inline-flex items-center gap-2 bg-amazon-900 text-white px-8 py-4 rounded-xl font-bold hover:bg-amazon-800 transition-all shadow-lg hover:translate-x-1"
              >
                Conocer FORAMA <ArrowRight size={20} />
              </a>
              <a 
                href="/programas" 
                class="inline-flex items-center gap-2 bg-white border border-gray-200 text-amazon-900 px-8 py-4 rounded-xl font-bold hover:bg-gray-50 transition-all"
              >
                Ver Programas
              </a>
            </div>
          </div>

          {/* ✅ OPTIMIZACIÓN 10: Imagen con loading lazy y dimensiones */}
          <div class="relative">
            <div class="flex justify-center items-center">
              <img
                src="/imags/material_navbar/campo.jpg"
                alt="Equipo FORAMA trabajando en campo en la Amazonía"
                class="h-[615px] w-full object-cover object-top rounded-[2.5rem] shadow-2xl hover:scale-[1.01] transition-transform duration-500"
                loading="lazy"
                width="600"
                height="615"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    {/* ✅ OPTIMIZACIÓN 11: Sección de video institucional */}
    <section 
      class="py-20 bg-amazon-950 relative overflow-hidden"
      aria-labelledby="video-heading"
    >
      {/* Background effects */}
      <div class="absolute -top-20 -right-20 w-[30rem] h-[30rem] bg-green-600/20 rounded-full blur-[120px] mix-blend-screen animate-blob opacity-70 pointer-events-none" aria-hidden="true"></div>
      <div class="absolute -bottom-20 -left-20 w-[35rem] h-[35rem] bg-earth-600/10 rounded-full blur-[120px] mix-blend-screen animate-blob animation-delay-2000 opacity-70 pointer-events-none" aria-hidden="true"></div>
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[length:24px_24px] opacity-50 mix-blend-overlay pointer-events-none" aria-hidden="true"></div>
      <div class="absolute inset-0 bg-gradient-to-b from-transparent via-amazon-950/80 to-amazon-950 pointer-events-none" aria-hidden="true"></div>

      <div class="container mx-auto px-4 max-w-6xl relative z-10">
        <div class="grid md:grid-cols-2 gap-10 lg:gap-16 items-center">
          <div class="text-left scroll-trigger opacity-0 translate-y-10 transition-all duration-1000">
            <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-green-900/30 border border-green-500/30 text-green-300 text-[10px] font-bold uppercase tracking-widest mb-6 backdrop-blur-md shadow-lg">
              <span class="relative flex h-2 w-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
              </span>
              Video Institucional
            </span>
            
            <h2 id="video-heading" class="text-3xl md:text-5xl font-extrabold text-white mb-6 tracking-tight leading-tight drop-shadow-2xl">
              Sumérgete en el impacto de <span class="text-transparent bg-clip-text bg-gradient-to-br from-green-400 via-emerald-300 to-earth-400">FORAMA</span>
            </h2>
            
            <p class="text-lg text-green-100/80 max-w-xl font-light leading-relaxed drop-shadow-sm">
              Descubre en pocos minutos cómo tejemos alianzas entre la ciencia, las comunidades y el bosque para proteger nuestro futuro. Un vistazo a nuestra labor diaria en el corazón de Pando.
            </p>
          </div>

          <div class="relative aspect-video w-full rounded-[2rem] overflow-hidden shadow-[0_25px_50px_-12px_rgba(16,185,129,0.25)] border border-white/10 bg-amazon-900/50 backdrop-blur-sm group scroll-trigger opacity-0 translate-y-10 transition-all duration-1000 delay-300 ring-1 ring-white/5 transform hover:scale-[1.02] transition-transform">
            <video 
              controls 
              preload="metadata"
              class="w-full h-full object-cover z-10 relative rounded-[2rem]"
              poster="/imags/material_navbar/rio.jpg"
              aria-label="Video institucional de FORAMA"
            >
              <source src="/videos/forama_explicacion.mp4" type="video/mp4" />
              Tu navegador no soporta la reproducción de video.
            </video>

            <div class="absolute inset-0 border-2 border-green-500/0 group-hover:border-green-400/40 rounded-[2rem] transition-all duration-500 pointer-events-none z-20" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </section>

    {/* ✅ OPTIMIZACIÓN 12: Sección de pilares con datos estructurados */}
    <section 
      class="py-32 bg-white scroll-trigger opacity-0 translate-y-20 transition-all duration-1000"
      aria-labelledby="pillars-heading"
    >
      <div class="container mx-auto px-4 max-w-7xl">
        <div class="text-center mb-20">
          <h2 id="pillars-heading" class="text-4xl font-extrabold text-amazon-900 mb-4">Nuestros Pilares</h2>
          <div class="w-20 h-1.5 bg-earth-500 mx-auto rounded-full" aria-hidden="true"></div>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          {pilares.map((pilar) => {
            const Icon = pilar.icono;
            return (
              <article 
                class="group relative overflow-hidden rounded-[2rem] h-[400px] cursor-pointer shadow-lg hover:shadow-2xl transition-all"
                id={pilar.id}
              >
                <img 
                  src={pilar.imagen} 
                  alt={`${pilar.titulo} - ${pilar.descripcion}`}
                  class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                  loading="lazy"
                  width="400"
                  height="400"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-amazon-900/90 via-amazon-900/40 to-transparent" aria-hidden="true"></div>
                <div class="absolute bottom-0 p-8 text-white">
                  <Icon className={`mb-4 text-${pilar.color}-400`} size={32} aria-hidden="true" />
                  <h3 class="text-2xl font-bold mb-2">{pilar.titulo}</h3>
                  <p class="text-gray-200 text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 translate-y-4 group-hover:translate-y-0">
                    {pilar.descripcion}
                  </p>
                  <a 
                    href={pilar.url} 
                    class={`inline-block mt-4 text-${pilar.color}-300 font-bold text-sm hover:text-white`}
                    aria-label={`Leer más sobre ${pilar.titulo}`}
                  >
                    Ver más →
                  </a>
                </div>
              </article>
            );
          })}
        </div>
      </div>
    </section>

    {/* ✅ OPTIMIZACIÓN 13: Sección de ubicación con modal accesible */}
    <section 
      class="relative py-20 lg:py-32 overflow-hidden bg-gradient-to-br from-[#0f3323] via-[#061a10] to-[#020604]"
      aria-labelledby="location-heading"
    >
      {/* Background effects */}
      <div class="absolute top-0 left-0 w-[800px] h-[800px] bg-green-900/20 rounded-full blur-[120px] pointer-events-none mix-blend-screen" aria-hidden="true"></div>
      <div class="absolute top-1/2 right-0 -translate-y-1/2 translate-x-1/4 w-[700px] h-[700px] bg-green-600/10 rounded-full blur-[100px] pointer-events-none" aria-hidden="true"></div>
      
      <div class="container mx-auto px-4 relative z-10 max-w-7xl">
        <div class="grid lg:grid-cols-2 gap-10 lg:gap-0 items-center">
          <div class="text-left animate-fade-in-up relative z-20 max-w-xl">
            <div class="inline-flex items-center gap-3 mb-6 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-md shadow-lg">
              <span class="relative flex h-2.5 w-2.5">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
              </span>
              <span class="text-green-200 font-bold tracking-[0.2em] uppercase text-[11px]">Territorio de Impacto</span>
            </div>

            <h2 id="location-heading" class="text-4xl md:text-6xl font-extrabold text-white leading-[1.1] mb-6">
              Desde la profundidad <br />
              <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-300 to-teal-200 drop-shadow-md">
                del bosque
              </span>
            </h2>

            <p class="text-lg text-gray-300 font-light leading-relaxed mb-10 text-pretty border-l-2 border-green-500/30 pl-6">
              Nuestra base operativa está en <strong class="text-white font-semibold">Cobija</strong>. Desde este punto estratégico, desplegamos nuestros programas de conservación hacia las 5 provincias de Pando.
            </p>

            {/* ✅ BOTÓN ACTUALIZADO: Enlace directo a Google Maps Satelital */}
            <a 
              href="https://www.google.com/maps?q=-11.037917,-68.773861&t=k" 
              target="_blank"
              rel="noopener noreferrer"
              class="group relative overflow-hidden rounded-2xl bg-white/10 px-8 py-4 transition-all hover:bg-white/20 hover:scale-[1.02] border border-white/10 shadow-xl inline-flex items-center"
              aria-label="Ver ubicación satelital en Google Maps"
            >
              <div class="relative z-10 flex items-center gap-3">
                <MapIcon size={22} className="text-green-400 group-hover:text-white transition-colors" aria-hidden="true" />
                <span class="font-bold text-white tracking-wide">Ver Ubicación Satelital</span>
              </div>
              <div class="absolute inset-0 -translate-x-full group-hover:animate-shimmer bg-gradient-to-r from-transparent via-white/10 to-transparent" aria-hidden="true"></div>
            </a>
          </div>

          <div class="relative group perspective-1000 flex justify-center lg:justify-end mt-12 lg:mt-0 lg:-mr-24">
            <div class="absolute inset-0 bg-green-500/10 blur-3xl rounded-full transform scale-110 pointer-events-none" aria-hidden="true"></div>

            <img 
              src="/imags/material_navbar/PANDO.png" 
              alt="Mapa del departamento de Pando, Bolivia" 
              class="relative z-10 w-full h-auto object-contain transform scale-110 lg:scale-[1.35] origin-center drop-shadow-[0_0_15px_rgba(74,222,128,0.6)] hover:drop-shadow-[0_0_30px_rgba(74,222,128,0.9)] transition-all duration-700 hover:scale-[1.38] hover:rotate-1"
              loading="lazy"
              width="600"
              height="600"
            />

            <div class="absolute top-0 left-0 md:top-0 md:left-10 bg-amazon-950/80 backdrop-blur-xl border border-green-400/40 p-5 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.5)] animate-float z-30 hover:scale-105 transition-transform">
              <div class="flex items-center gap-2 mb-2">
                <span class="relative flex h-2.5 w-2.5">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
                </span>
                <p class="text-[11px] text-green-300 font-bold uppercase tracking-widest">Área de Cobertura</p>
              </div>
              <p class="text-3xl font-extrabold text-white tracking-tight">
                63.827 <span class="text-sm text-gray-400 font-medium">km²</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    {/* ✅ OPTIMIZACIÓN 15: CTA final optimizado */}
     <section 
  class="relative py-32 overflow-hidden scroll-trigger"
  aria-labelledby="cta-heading"
>
  <img 
    src="/imags/material_navbar/amazonas.jpg" 
    alt="" 
    class="absolute inset-0 w-full h-full object-cover animate-slow-zoom"
    loading="lazy"
    aria-hidden="true"
  />
  
  <div class="absolute inset-0 bg-gradient-to-tr from-earth-950 via-amazon-900/80 to-earth-900/70 mix-blend-multiply" aria-hidden="true"></div>
  <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl h-96 bg-orange-500/20 rounded-full blur-[120px] pointer-events-none" aria-hidden="true"></div>

  <div class="container mx-auto px-4 relative z-10 text-center">
    <h2 id="cta-heading" class="text-4xl md:text-6xl font-extrabold text-white mb-8 tracking-tight leading-tight scroll-element fade-up opacity-0 translate-y-10 drop-shadow-xl">
      Tu apoyo <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-300 to-yellow-200">germina</span> en el bosque
    </h2>
    
    <p class="text-xl text-orange-100 max-w-3xl mx-auto leading-relaxed font-light mb-12 scroll-element fade-up delay-100 opacity-0 translate-y-10 drop-shadow-md">
      Cada donación se convierte directamente en equipos para guardaparques, insumos médicos para comunidades y herramientas para la investigación científica.
    </p>
    
    {/* ✅ BOTONES ACTUALIZADOS: 3 botones ahora */}
    <div class="flex flex-col sm:flex-row items-center justify-center gap-6 scroll-element fade-up delay-200 opacity-0 translate-y-10">
      
      {/* Botón 1: Hacer una Donación */}
      <a 
        href="/como-apoyar" 
        class="group relative overflow-hidden bg-gradient-to-r from-earth-500 to-orange-600 text-white font-bold text-lg py-4 px-10 rounded-2xl shadow-2xl hover:shadow-orange-500/50 hover:scale-105 transition-all duration-300"
      >
        <span class="relative z-10 flex items-center gap-2">
          Hacer una Donación
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 group-hover:text-white group-hover:fill-current transition-all" aria-hidden="true"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        </span>
        <div class="absolute inset-0 bg-white/20 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500" aria-hidden="true"></div>
      </a>
      
      {/* ✅ Botón 2: Contáctanos (NUEVO) */}
      <a 
        href="/contacto" 
        class="group relative overflow-hidden bg-gradient-to-r from-earth-500 to-orange-600 text-white font-bold text-lg py-4 px-10 rounded-2xl shadow-2xl hover:shadow-orange-500/50 hover:scale-105 transition-all duration-300"
      >
        <span class="relative z-10 flex items-center gap-2">
          Contáctanos
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 group-hover:text-white transition-all" aria-hidden="true">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            <path d="M8 10h.01"/>
            <path d="M12 10h.01"/>
            <path d="M16 10h.01"/>
          </svg>
        </span>
        <div class="absolute inset-0 bg-white/20 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500" aria-hidden="true"></div>
      </a>

      {/* Botón 3: Ser Voluntario */}
      
       <a href="/contacto#contacto-info"
        class="group relative overflow-hidden bg-white/10 backdrop-blur-md text-white font-bold text-lg py-4 px-10 rounded-2xl border-2 border-white/30 hover:bg-white/20 hover:border-white/50 transition-all duration-300 hover:scale-105"
      >
        <span class="relative z-10 flex items-center gap-2">
          Ser Voluntario
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 group-hover:text-white transition-all" aria-hidden="true">
            <path d="m11 17 2 2a1 1 0 1 0 3-3"/>
            <path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/>
            <path d="m21 3 1 11h-2"/><path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/>
          </svg>
        </span>
      </a>
    </div>
  </div>
</section>

  </main>
</Layout>

{/* ✅ OPTIMIZACIÓN 16: Estilos optimizados */}
<style>
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
  .modal-active .modal-content {
    transform: scale(100%);
    opacity: 1;
  }
  
  /* Screen reader only class */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
</style>

{/* ✅ OPTIMIZACIÓN 17: Scripts optimizados con mejor manejo */}
<script>
  document.addEventListener('astro:page-load', () => {
    // Modal functionality
    const openBtn = document.getElementById('openMapBtn');
    const closeBtn = document.getElementById('closeMapBtn');
    const modal = document.getElementById('mapModal');
    const overlay = document.getElementById('modalOverlay');

    if (openBtn && closeBtn && modal && overlay) {
      const openModal = () => {
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden'; // Prevent background scroll
        setTimeout(() => modal.classList.add('modal-active'), 10);
      };

      const closeModal = () => {
        modal.classList.remove('modal-active');
        document.body.style.overflow = ''; // Restore scroll
        setTimeout(() => {
          modal.classList.remove('flex');
          modal.classList.add('hidden');
        }, 300);
      };

      openBtn.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      overlay.addEventListener('click', closeModal);
      
      // Close on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('flex')) {
          closeModal();
        }
      });
    }

    // Scroll animations with IntersectionObserver
    const observerOptions = {
      root: null,
      rootMargin: '0px',
      threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.remove('opacity-0', 'translate-y-20', 'translate-y-10');
          entry.target.classList.add('opacity-100', 'translate-y-0');

          // Animate children
          const children = entry.target.querySelectorAll('.scroll-element');
          children.forEach((child) => {
            child.classList.remove('opacity-0', 'translate-y-10');
            child.classList.add('opacity-100', 'translate-y-0');
          });

          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    document.querySelectorAll('.scroll-trigger').forEach((section) => {
      observer.observe(section);
    });
  });
</script>